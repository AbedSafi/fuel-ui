{"version":3,"sources":["directives/Collapse/Collapse.ts"],"names":[],"mappings":"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","file":"directives/Collapse/Collapse.js","sourcesContent":["import {Directive, Input, OnChanges, ElementRef} from \"angular2/core\";\nimport {CORE_DIRECTIVES} from \"angular2/common\";\nimport {AnimationBuilder} from 'angular2/src/animate/animation_builder';\nimport {CssAnimationBuilder} from 'angular2/src/animate/css_animation_builder';\n\n@Directive({\n    selector: '[collapse]',\n    host: {\n        '[attr.aria-expanded]': '!collapse',\n        '[attr.aria-hidden]': 'collapse'\n    }\n})\nexport class Collapse implements OnChanges{\n    @Input() duration: number = 500;\n    @Input() collapse: boolean = false;\n    private _animation: CssAnimationBuilder;\n\n    constructor(animationBuilder:AnimationBuilder, public element:ElementRef) {\n        this._animation = animationBuilder.css();\n    }\n        \n    private get _elementHeight(): number {\n        let el = this.element.nativeElement;\n        let height = el.offsetHeight;\n        let style = getComputedStyle(el);\n        \n        return height += parseInt(style.marginTop) + parseInt(style.marginBottom);\n    }\n    \n    private get _baseSequence(): CssAnimationBuilder {\n        return this._animation\n                    .setDuration(this.duration)\n                    .removeClass('fuel-ui-collapse')\n                    .removeClass('in')\n                    .addAnimationClass('fuel-ui-collapsing')\n    }\n\n    ngOnChanges(changes: any) {\n        if (!changes.collapse || typeof changes.collapse.previousValue !== 'boolean') return;\n        return this.collapse ? this.hide() : this.show();\n    }\n    \n    hide(): void {\n        this._baseSequence\n            .setFromStyles({\n                height: this.element.nativeElement.scrollHeight + 'px',\n                overflow: 'hidden'\n            })\n            .setToStyles({\n                height: '0',\n                paddingTop: '0',\n                paddingBottom: '0'\n            });\n        \n        let a = this._animation.start(this.element.nativeElement);\n        a.onComplete(() => {\n            a.removeClasses(['in']);\n            a.addClasses(['fuel-ui-collapse']);\n        });\n    }\n\n    show(): void {\n        this._animation\n        .setDuration(0)\n        .addClass('in')\n        .setFromStyles({\n            overflow: 'hidden'\n        })\n        .setToStyles({\n            paddingTop: '',\n            paddingBottom: ''\n        })\n        .start(this.element.nativeElement)\n        .onComplete(() => {\n            let a = this._baseSequence\n                        .setFromStyles({\n                            height: '0' \n                        })\n                        .setToStyles({\n                            height: this.element.nativeElement.scrollHeight + 'px'\n                        })\n                        .start(this.element.nativeElement);\n            \n            a.onComplete(() =>  a.addClasses(['fuel-ui-collapse', 'in']) );\n        });\n    }\n    \n}\n\nexport var COLLAPSE_PROVIDERS = [\n    Collapse\n];"],"sourceRoot":"/source/"}
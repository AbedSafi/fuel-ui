{"version":3,"sources":["directives/Collapse/Collapse.ts"],"names":[],"mappings":"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","file":"directives/Collapse/Collapse.js","sourcesContent":["import {Directive, Input, OnInit, OnChanges, ElementRef} from '@angular/core';\nimport {CORE_DIRECTIVES} from '@angular/common';\nimport {AnimationBuilder} from '@angular/platform-browser/src/animate/animation_builder';\nimport {CssAnimationBuilder} from '@angular/platform-browser/src/animate/css_animation_builder';\n\n@Directive({\n    selector: '[collapse]',\n    host: {\n        '[attr.aria-expanded]': '!collapse',\n        '[attr.aria-hidden]': 'collapse'\n    }\n})\nexport class Collapse implements OnInit, OnChanges{\n    @Input() duration: number = 500;\n    @Input() collapse: boolean = true;\n    private _animation: CssAnimationBuilder;\n\n    constructor(animationBuilder:AnimationBuilder, public element:ElementRef) {\n        this._animation = animationBuilder.css();\n    }\n        \n    private get _baseSequence(): CssAnimationBuilder {\n        return this._animation\n                    .setDuration(this.duration)\n                    .removeClass('fuel-ui-collapse')\n                    .removeClass('in')\n                    .addAnimationClass('fuel-ui-collapsing')\n    }\n    \n    ngOnInit(): void {\n        if(!this.collapse) {\n            this._animation\n                .setDuration(0)\n                .addClass('in')\n                .start(this.element.nativeElement);\n        }\n    }\n\n    ngOnChanges(changes: any) {\n        if (!changes.collapse || typeof changes.collapse.previousValue !== 'boolean') return;\n        return this.collapse ? this.hide() : this.show();\n    }\n    \n    hide(): void {\n        \n        //Webkit fix\n        this.element.nativeElement.style.height = this.element.nativeElement.scrollHeight + 'px';\n        \n        this._baseSequence\n            .setFromStyles({\n                height: this.element.nativeElement.scrollHeight + 'px',\n                overflow: 'hidden'\n            })\n            .setToStyles({\n                height: '0',\n                paddingTop: '0',\n                paddingBottom: '0'\n            });\n        \n        let a = this._animation.setDuration(this.duration).start(this.element.nativeElement);\n        a.onComplete(() => {\n            //Check if user toggled collapse mid-animation\n            if(!this.collapse) return;\n            \n            a.removeClasses(['in']);\n            a.addClasses(['fuel-ui-collapse']);\n        });\n    }\n\n    show(): void {\n        this._animation\n        .setDuration(0)\n        .addClass('in')\n        .setFromStyles({\n            overflow: 'hidden'\n        })\n        .setToStyles({\n            paddingTop: '',\n            paddingBottom: ''\n        })\n        .start(this.element.nativeElement)\n        .onComplete(() => {\n            let a = this._baseSequence\n                        .setFromStyles({\n                            height: '0' \n                        })\n                        .setToStyles({\n                            height: this.element.nativeElement.scrollHeight + 'px'\n                        })\n                        .start(this.element.nativeElement);\n            \n            a.onComplete(() =>  {\n                a.addClasses(['fuel-ui-collapse', 'in']);\n                \n                //Set height to auto for expanding with dynamic content\n                this._animation\n                    .setDuration(0)\n                    .setFromStyles({\n                        height: this.element.nativeElement.scrollHeight + 'px'\n                    })\n                    .setToStyles({\n                        height: 'auto'\n                    })\n                    .start(this.element.nativeElement)\n                    .onComplete(() => {\n                        //Check if user toggled collapse mid-animation\n                        if(this.collapse)\n                            a.addClasses(['fuel-ui-collapse']);\n                    });\n            });\n        });\n    }\n    \n}\n\nexport var COLLAPSE_PROVIDERS = [\n    Collapse\n];"],"sourceRoot":"/source/"}